---
interface NavItem {
  label: string;
  href: string;
  icon: string;
}

const navItems: NavItem[] = [
  {
    label: "IoTcraft",
    href: "#home",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none"><path d="M4.48959 3.46882C4.09907 3.85935 4.09907 4.49251 4.48959 4.88304C4.88012 5.27356 5.51328 5.27356 5.90381 4.88304C6.70437 4.08247 7.65478 3.44743 8.70076 3.01417C9.74675 2.58091 10.8678 2.35791 12 2.35791C13.1322 2.35791 14.2532 2.58091 15.2992 3.01417C16.3452 3.44743 17.2956 4.08247 18.0962 4.88303C18.4867 5.27356 19.1199 5.27356 19.5104 4.88303C19.9009 4.49251 19.9009 3.85935 19.5104 3.46882C18.5241 2.48254 17.3532 1.70018 16.0646 1.16641C14.776 0.63264 13.3948 0.35791 12 0.35791C10.6052 0.35791 9.22404 0.63264 7.9354 1.16641C6.64676 1.70018 5.47587 2.48254 4.48959 3.46882z" fill="currentColor"/><path d="M7.62654 8.04594C7.23601 7.65542 7.23601 7.02225 7.62654 6.63173C8.20087 6.0574 8.8827 5.60181 9.6331 5.29099C10.3835 4.98016 11.1878 4.82018 12 4.82018C12.8122 4.82018 13.6165 4.98016 14.3669 5.29099C15.1173 5.60181 15.7991 6.0574 16.3735 6.63173C16.764 7.02225 16.764 7.65542 16.3735 8.04594C15.9829 8.43647 15.3498 8.43647 14.9592 8.04594C14.5706 7.65733 14.1093 7.34906 13.6015 7.13875C13.0938 6.92843 12.5496 6.82018 12 6.82018C11.4504 6.82018 10.9062 6.92843 10.3985 7.13875C9.89072 7.34906 9.42937 7.65733 9.04075 8.04594C8.65023 8.43647 8.01706 8.43647 7.62654 8.04594z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 9C10.3431 9 9 10.3432 9 12C9 13.3114 9.84136 14.4262 11.0137 14.8341C11.0047 14.8881 11 14.9435 11 15V16C11 17.1046 10.1046 18 9 18H6C6 16.8955 5.10457 16 4 16H2C0.89543 16 0 16.8955 0 18V20C0 21.1046 0.89543 22 2 22H4C5.10457 22 6 21.1046 6 20H9C10.1947 20 11.2671 19.4763 12 18.6459C12.7329 19.4763 13.8053 20 15 20H18C18 21.1046 18.8954 22 20 22H22C23.1046 22 24 21.1046 24 20V18C24 16.8955 23.1046 16 22 16H20C18.8954 16 18 16.8955 18 18H15C13.8954 18 13 17.1046 13 16V15C13 14.9435 12.9953 14.8881 12.9863 14.8341C14.1586 14.4262 15 13.3114 15 12C15 10.3432 13.6569 9 12 9zM13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.9655 11.0017 11.9314 11.0052 11.8978C11.0564 11.3935 11.4822 11 12 11C12.5523 11 13 11.4478 13 12zM20 20H22V18H20V20zM2 20H4V18H2V20z" fill="currentColor"/></svg>`,
  },
  {
    label: "Workflow",
    href: "#workflow",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M1 3a2 2 0 012-2h6.5a2 2 0 012 2v6.5a2 2 0 01-2 2H7v4.063C7 16.355 7.644 17 8.438 17H12.5v-2.5a2 2 0 012-2H21a2 2 0 012 2V21a2 2 0 01-2 2h-6.5a2 2 0 01-2-2v-2.5H8.437A2.938 2.938 0 015.5 15.562V11.5H3a2 2 0 01-2-2V3zm2-.5a.5.5 0 00-.5.5v6.5a.5.5 0 00.5.5h6.5a.5.5 0 00.5-.5V3a.5.5 0 00-.5-.5H3zM14.5 14a.5.5 0 00-.5.5V21a.5.5 0 00.5.5H21a.5.5 0 00.5-.5v-6.5a.5.5 0 00-.5-.5h-6.5z"></path></svg>`,
  },
  {
    label: "Connections",
    href: "#connections",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none"><path d="M13.5442 10.4558C11.8385 8.75022 9.07316 8.75022 7.36753 10.4558L4.27922 13.5442C2.57359 15.2498 2.57359 18.0152 4.27922 19.7208C5.98485 21.4264 8.75021 21.4264 10.4558 19.7208L12 18.1766" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M10.4558 13.5442C12.1614 15.2498 14.9268 15.2498 16.6324 13.5442L19.7207 10.4558C21.4264 8.75021 21.4264 5.98485 19.7207 4.27922C18.0151 2.57359 15.2497 2.57359 13.5441 4.27922L12 5.82338" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`,
  },
];
---

<div class="flex justify-center w-full">
  <nav
    class="fixed flex left-0 right-0 z-[100] bg-[#1414149c] border border-1 border-[var(--white-icon-tr)] backdrop-blur-xl transition-all md:top-0 md:bottom-auto bottom-0 md:w-[33rem] rounded-t-2xl md:rounded-full md:mt-6 md:justify-self-center"
  >
    <div class="container mx-auto flex justify-center items-center p-3">
      <ul
        class="flex w-full justify-between md:space-x-6 md:justify-center md:gap-12 gap-6"
      >
        {
          navItems.map((item) => (
            <li class="flex-1 md:flex-none">
              <a
                href={item.href}
                class="flex flex-col items-center gap-1 text-[var(--white-icon)] transition-colors text-xs md:text-base"
              >
                <span class="md:hidden flex items-center justify-center w-6 h-6">
                  <fragment set:html={item.icon} />
                </span>
                <span class="hidden md:inline-block">{item.label}</span>
                <span class="md:hidden">{item.label}</span>
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </nav>
</div>

<script>
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();
      const target = e.currentTarget as HTMLAnchorElement;
      const targetId = target.getAttribute("href")?.substring(1) || "";
      const targetElement = document.getElementById(targetId);
      if (targetElement) {
        targetElement.scrollIntoView({
          behavior: "smooth",
        });
      }
    });
  });

  document.addEventListener("DOMContentLoaded", () => {
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll("nav a[href^='#']");
    const observerOptions = { threshold: 0.6 };

    const observerCallback = (entries: any[]) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          navLinks.forEach((link) => link.classList.remove("active"));
          const id = entry.target.getAttribute("id");
          const activeLink = document.querySelector(`nav a[href="#${id}"]`);
          if (activeLink) {
            activeLink.classList.add("active");
          }
        }
      });
    };

    const observer = new IntersectionObserver(
      observerCallback,
      observerOptions
    );
    sections.forEach((section) => observer.observe(section));
  });
</script>

<style>
  @media (max-width: 767px) {
    body {
      padding-bottom: 70px;
    }
  }

  nav a.active {
    color: white !important;
  }
</style>
